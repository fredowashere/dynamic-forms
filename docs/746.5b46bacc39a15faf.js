"use strict";(self.webpackChunkmulti_layout=self.webpackChunkmulti_layout||[]).push([[746],{5746:(Ct,w,c)=>{c.r(w),c.d(w,{DynamicFormModule:()=>y});var p=c(6895),g=c(646),O=c(4004),F=c(9300),T=c(8505),t=c(1571);class d{constructor(){this.forms={"Default form":{form:{name:"Default form",columns:3,controls:{Cognome:{type:"text",default:"Trotta",floatingLabel:!0,validators:[{type:"required"}]},Nome:{type:"text",default:"Federico",floatingLabel:!0,validators:[{type:"required"}]},Indirzzo:{type:"text",default:"Via D. Manin 30",floatingLabel:!0,validators:[{type:"required"}]},Password:{type:"password",default:"aaa",floatingLabel:!0,validators:[{type:"required"}]}}},data:[]}}}register(n){this.forms[n.name]={form:n,data:[]}}getForms(){return this.forms}getForm(n){return this.forms[n]}}d.\u0275fac=function(n){return new(n||d)},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var M=c(4465);function k(o,n){if(1&o&&t._UZ(0,"app-form",15),2&o){const e=t.oxw();t.Q6J("appForm",e.appForm)}}function N(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.openForm(r[1].form))}),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",17),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(4,"button",18),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.goToUse(r[1].form))}),t._UZ(5,"i",19),t._uU(6," Data "),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e[0])}}class h{constructor(n,e,i,a){this.dynamicFormService=n,this.router=e,this.route=i,this.toaster=a,this.Object=Object,this.JSON=JSON}ngOnInit(){this.route.queryParamMap.pipe((0,O.U)(n=>n.get("name")),(0,F.h)(n=>!!n),(0,T.b)(n=>{try{this.appForm=this.dynamicFormService.getForm(n).form}catch{this.toaster.show("Could not load form.",{classname:"bg-danger text-light"})}})).subscribe()}onFormPreview(n){try{this.appForm=JSON.parse(n)}catch(e){throw this.toaster.show("Invalid JSON.",{classname:"bg-danger text-light"}),e}}onFormSave(n){this.onFormPreview(n),this.appForm&&(this.dynamicFormService.register(this.appForm),this.openForm(this.appForm))}openForm(n){this.router.navigate(["."],{queryParams:{name:n.name},relativeTo:this.route})}goToUse(n){this.router.navigate(["dashboard","dynamic-form","use"],{queryParams:{name:n.name}})}}h.\u0275fac=function(n){return new(n||h)(t.Y36(d),t.Y36(g.F0),t.Y36(g.gz),t.Y36(M.k))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-create"]],decls:22,vars:4,consts:[[1,"d-flex","flex-wrap","gap-3","p-3",2,"margin","min(10vh, 10rem) auto","max-width","1920px"],[2,"flex","9999 1 700px"],[1,"card","card-body","shadow",2,"height","100%"],[1,"display-6"],[3,"appForm",4,"ngIf"],[2,"flex","1 1 700px"],[1,"app-form-list"],["class","app-form-entry",3,"click",4,"ngFor","ngForOf"],[1,"form-floating","mb-3"],["id","mode",1,"form-control",2,"min-height","600px","height","100%",3,"value"],["model",""],["for","model"],[1,"d-flex","gap-3","justify-content-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary",3,"click"],[3,"appForm"],[1,"app-form-entry",3,"click"],[3,"click"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-database-fill"]],template:function(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"div",0)(1,"main",1)(2,"div",2)(3,"h6",3),t._uU(4),t.qZA(),t.YNc(5,k,1,1,"app-form",4),t.qZA()(),t.TgZ(6,"aside",5)(7,"div",2)(8,"h6",3),t._uU(9,"Edit"),t.qZA(),t.TgZ(10,"div",6),t.YNc(11,N,7,1,"div",7),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"textarea",9,10),t.TgZ(15,"label",11),t._uU(16,"Form JSON"),t.qZA()(),t.TgZ(17,"div",12)(18,"button",13),t.NdJ("click",function(){t.CHM(i);const r=t.MAs(14);return t.KtG(e.onFormPreview(r.value))}),t._uU(19,"Preview"),t.qZA(),t.TgZ(20,"button",14),t.NdJ("click",function(){t.CHM(i);const r=t.MAs(14);return t.KtG(e.onFormSave(r.value))}),t._uU(21,"Save"),t.qZA()()()()()}2&n&&(t.xp6(4),t.Oqu(null==e.appForm?null:e.appForm.name),t.xp6(1),t.Q6J("ngIf",e.appForm),t.xp6(6),t.Q6J("ngForOf",e.Object.entries(e.dynamicFormService.getForms())),t.xp6(2),t.Q6J("value",e.appForm?e.JSON.stringify(e.appForm,null,2):""))},styles:[".app-form-list[_ngcontent-%COMP%]{display:grid;gap:.25rem;border:1px solid rgba(var(--app-gray_200),1);border-radius:6px;margin-bottom:1rem;max-height:175px;overflow:auto;padding:.5rem}.app-form-entry[_ngcontent-%COMP%]{background:rgba(var(--app-gray_0),1);border:1px solid rgba(var(--app-gray_200),1);border-radius:6px;color:rgba(var(--app-gray_900),1);cursor:pointer;display:flex;justify-content:space-between;align-items:center;padding:.5rem .75rem;transition:all .3s ease}.app-form-entry[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #0002}"]});var A=c(4037),l=c(433),Q=c(7579),Z=c(1135),E=c(2722),U=c(8675);function v(o,n=self,e="."){return o.split(e).reduce((a,r)=>a?.[r],n)}var Y=c(3488);const q={asc:"desc",desc:"","":"asc"};class u{constructor(){this.sortable="",this.direction="",this.sort=new t.vpe}rotate(){this.direction=q[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}u.\u0275fac=function(n){return new(n||u)},u.\u0275dir=t.lG2({type:u,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(n,e){1&n&&t.NdJ("click",function(){return e.rotate()}),2&n&&t.ekj("asc","asc"===e.direction)("desc","desc"===e.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"},standalone:!0});var P=c(7914),J=c(228);class b{constructor(n,e){this.ctx={ngLet:null},n.createEmbeddedView(e,this.ctx)}set ngLet(n){this.ctx.ngLet=n}}function D(o,n){if(1&o&&t._UZ(0,"app-input",12),2&o){const e=t.oxw(2);t.Q6J("ngControl",e.searchInput)}}function L(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",13)(1,"ngb-pagination",14),t.NdJ("pageChange",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.page=a)})("pageChange",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.paginate())}),t.qZA(),t.TgZ(2,"select",15),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.pageSize=a)})("ngModelChange",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.paginate())}),t.TgZ(3,"option",16),t._uU(4,"5"),t.qZA(),t.TgZ(5,"option",16),t._uU(6,"10"),t.qZA(),t.TgZ(7,"option",16),t._uU(8,"20"),t.qZA(),t.TgZ(9,"option",16),t._uU(10,"50"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("collectionSize",e.collectionSize)("page",e.page)("pageSize",e.pageSize)("maxSize",3)("rotate",!0)("boundaryLinks",!0),t.xp6(1),t.Q6J("ngModel",e.pageSize),t.xp6(1),t.Q6J("ngValue",5),t.xp6(2),t.Q6J("ngValue",10),t.xp6(2),t.Q6J("ngValue",20),t.xp6(2),t.Q6J("ngValue",50)}}function z(o,n){if(1&o&&(t.TgZ(0,"div",9)(1,"div"),t.YNc(2,D,1,1,"app-input",10),t.qZA(),t.YNc(3,L,11,11,"div",11),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.searchable),t.xp6(1),t.Q6J("ngIf",e.paginated)}}function j(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"th",17)(1,"div",18)(2,"input",19),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw();return t.KtG(a.currentTarget.checked?r.onEveryRowSelect():r.onEveryRowDeselect())}),t.qZA()()()}}function G(o,n){1&o&&t._UZ(0,"th",17)}function $(o,n){1&o&&t.GkF(0)}function B(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td")(1,"div",18)(2,"input",23),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw(2).$implicit;return t.KtG(r._.selected=a)})("change",function(a){t.CHM(e);const r=t.oxw(2).$implicit,m=t.oxw();return t.KtG(a.currentTarget.checked?m.onRowSelect(r):m.onRowDeselect(r))}),t.qZA()()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngModel",e._.selected)}}function K(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td")(1,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().ngLet;return t.KtG(a.collapsed=!a.collapsed)}),t.qZA()()}if(2&o){const e=t.oxw().ngLet;t.xp6(1),t.uIk("aria-expanded",!e.collapsed)}}function R(o,n){1&o&&t.GkF(0)}function V(o,n){1&o&&t.GkF(0)}b.\u0275fac=function(n){return new(n||b)(t.Y36(t.s_b),t.Y36(t.Rgc))},b.\u0275dir=t.lG2({type:b,selectors:[["","ngLet",""]],inputs:{ngLet:"ngLet"}});const S=function(o,n){return{$implicit:o,term$:n}};function W(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",25)(2,"div",26,27),t.NdJ("ngbCollapseChange",function(a){t.CHM(e);const r=t.oxw().ngLet;return t.KtG(r.collapsed=a)}),t.YNc(4,V,1,0,"ng-container",21),t.qZA()()()}if(2&o){const e=t.oxw().ngLet,i=t.oxw().$implicit,a=t.oxw();t.xp6(2),t.Q6J("ngbCollapse",e.collapsed),t.xp6(2),t.Q6J("ngTemplateOutlet",a.rowExpand)("ngTemplateOutletContext",t.WLB(3,S,i,a.searchInput.valueChanges))}}function X(o,n){1&o&&t._UZ(0,"tr",28)}function tt(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"tr"),t.YNc(2,B,3,1,"td",6),t.YNc(3,K,2,1,"td",6),t.YNc(4,R,1,0,"ng-container",21),t.qZA(),t.YNc(5,W,5,6,"tr",6),t.YNc(6,X,1,0,"tr",22),t.BQk()),2&o){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.ekj("animated",i.animated),t.xp6(1),t.Q6J("ngIf",i.selectable),t.xp6(1),t.Q6J("ngIf",i.rowExpand),t.xp6(1),t.Q6J("ngTemplateOutlet",i.tbody)("ngTemplateOutletContext",t.WLB(8,S,e,i.lastTerm$)),t.xp6(1),t.Q6J("ngIf",i.rowExpand),t.xp6(1),t.Q6J("ngIf",i.rowExpand)}}const et=function(){return{collapsed:!0}};function nt(o,n){1&o&&(t.ynx(0),t.YNc(1,tt,7,11,"ng-container",20),t.BQk()),2&o&&(t.xp6(1),t.Q6J("ngLet",t.DdM(1,et)))}function ot(o,n){1&o&&t.GkF(0)}function at(o,n){if(1&o&&(t.TgZ(0,"tfoot")(1,"tr"),t.YNc(2,ot,1,0,"ng-container",4),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngTemplateOutlet",e.tfoot)}}function it(o,n){1&o&&t.GkF(0)}function rt(o,n){if(1&o&&(t.ynx(0),t.YNc(1,it,1,0,"ng-container",4),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",e.emptyTemplate)}}function st(o,n){if(1&o&&(t.ynx(0),t.YNc(1,rt,2,1,"ng-container",6),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.items.length)}}function ct(o,n){if(1&o&&(t.TgZ(0,"div",30),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.emptyMessage," ")}}function lt(o,n){if(1&o&&t.YNc(0,ct,2,1,"div",29),2&o){const e=t.oxw();t.Q6J("ngIf",!e.items.length)}}const pt=function(o){return{"max-height":o}};class x{constructor(){this.destroy$=new Q.x,this._guid="app-table-"+(0,Y.M)(),this.animated=!1,this.trackByFn=(n,e)=>e,this.emptyMessage="No results to display",this.stickyHead=!1,this.maxHeight=!1,this.paginated=!1,this.paginatedItems$=new Z.X([]),this.page=1,this.lastColumn="",this.lastDirection="",this.sortedItems=[],this.searchable=!1,this.searchInput=new l.NI("",{nonNullable:!0}),this.lastTerm$=new Z.X(""),this.filteredItems=[],this.rowSelected=new t.vpe,this.rowDeselected=new t.vpe,this.selectable=!1}get selectedRows(){return this.paginatedItems$.getValue().filter(n=>n._.selected)}ngOnInit(){if(!this.thead)throw Error("AppTable needs a thead template");if(!this.tbody)throw Error("AppTable needs a tbody template");if(!this.items)throw Error("AppTable needs the items array");if(this.items&&!Array.isArray(this.items))throw Error("AppTable items must to be an array");if(this.collectionSize=this.items.length,this.paginated&&!this.pageSize)throw Error("AppTable needs pageSize when paginated");this.paginated||(this.pageSize=this.items.length),this.searchInput.valueChanges.pipe((0,E.R)(this.destroy$),(0,U.O)(this.lastTerm$.getValue()),(0,T.b)(n=>{this.lastTerm$.next(n),this.search()})).subscribe()}ngOnChanges(n){n.items.currentValue!==n.items.previousValue&&this.search()}ngOnDestroy(){this.destroy$.next()}search(){this.filter(),this.sort({column:this.lastColumn,direction:this.lastDirection})}filter(){this.filteredItems=this.items.filter(n=>{const e=this.lastTerm$.getValue().toLowerCase();return this.searchable&&Array.isArray(this.searchable)&&this.searchable.length?this.searchable.some(a=>((v(a,n)||"")+"").toLowerCase().includes(e)):JSON.stringify(n).toLowerCase().includes(e)}),this.collectionSize=this.filteredItems.length}sort({column:n,direction:e}){if(!this.headers)return this.sortedItems=this.filteredItems,void this.paginate();this.headers.forEach(i=>{i.sortable!==n&&(i.direction="")}),this.sortedItems=""===e||""===n?this.filteredItems:[...this.filteredItems].sort((i,a)=>{const r=function H(o,n){return o<n?-1:o>n?1:0}(v(n,i),v(n,a));return"asc"===e?r:-r}),this.lastColumn=n,this.lastDirection=e,this.paginate()}paginate(){this.sortedItems.forEach(e=>Object.setPrototypeOf(e,{_:{selected:!1}}));const n=this.sortedItems.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize);this.paginatedItems$.next(n)}onRowSelect(n){this.rowSelected.emit(n)}onRowDeselect(n){this.rowDeselected.emit(n)}onEveryRowSelect(){this.paginatedItems$.getValue().forEach(e=>e._.selected=!0)}onEveryRowDeselect(){this.paginatedItems$.getValue().forEach(e=>e._.selected=!1)}}x.\u0275fac=function(n){return new(n||x)},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-table"]],contentQueries:function(n,e,i){if(1&n&&t.Suo(i,u,4),2&n){let a;t.iGM(a=t.CRH())&&(e.headers=a)}},inputs:{thead:"thead",tbody:"tbody",animated:"animated",rowExpand:"rowExpand",tfoot:"tfoot",items:"items",trackByFn:"trackByFn",emptyTemplate:"emptyTemplate",emptyMessage:"emptyMessage",stickyHead:"stickyHead",maxHeight:"maxHeight",paginated:"paginated",pageSize:"pageSize",searchable:"searchable",selectable:"selectable"},outputs:{rowSelected:"rowSelected",rowDeselected:"rowDeselected"},features:[t.TTD],decls:15,vars:16,consts:[["class","d-flex justify-content-center justify-content-lg-between flex-wrap gap-2 p-3 mb-2",4,"ngIf"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped"],["style","width: 60px",4,"ngIf"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["empty",""],[1,"d-flex","justify-content-center","justify-content-lg-between","flex-wrap","gap-2","p-3","mb-2"],["style","max-width: 250px","name","search","placeholder","Search \u2315",3,"ngControl",4,"ngIf"],["class","d-flex flex-wrap justify-content-center gap-2",4,"ngIf"],["name","search","placeholder","Search \u2315",2,"max-width","250px",3,"ngControl"],[1,"d-flex","flex-wrap","justify-content-center","gap-2"],[3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],[1,"form-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],[2,"width","60px"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change"],[4,"ngLet"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","hidden",4,"ngIf"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],["type","button","aria-controls","collapseExample",1,"btn","collapse-toggle",3,"click"],["colspan","99",1,"row-expand"],[3,"ngbCollapse","ngbCollapseChange"],["collapse","ngbCollapse"],[1,"hidden"],["class","p-3 text-center",4,"ngIf"],[1,"p-3","text-center"]],template:function(n,e){if(1&n&&(t.YNc(0,z,4,2,"div",0),t.TgZ(1,"div",1)(2,"table",2)(3,"thead")(4,"tr"),t.YNc(5,j,3,0,"th",3),t.YNc(6,G,1,0,"th",3),t.YNc(7,$,1,0,"ng-container",4),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,nt,2,2,"ng-container",5),t.ALo(10,"async"),t.qZA(),t.YNc(11,at,3,1,"tfoot",6),t.qZA()(),t.YNc(12,st,2,1,"ng-container",7),t.YNc(13,lt,1,1,"ng-template",null,8,t.W1O)),2&n){const i=t.MAs(14);t.Q6J("ngIf",e.searchable||e.paginated),t.xp6(1),t.Q6J("ngStyle",t.VKq(14,pt,e.maxHeight)),t.xp6(2),t.ekj("sticky-head",e.stickyHead),t.xp6(2),t.Q6J("ngIf",e.selectable),t.xp6(1),t.Q6J("ngIf",e.rowExpand),t.xp6(1),t.Q6J("ngTemplateOutlet",e.thead),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,12,e.paginatedItems$))("ngForTrackBy",e.trackByFn),t.xp6(2),t.Q6J("ngIf",e.tfoot),t.xp6(1),t.Q6J("ngIf",e.emptyTemplate)("ngIfElse",i)}},dependencies:[p.sg,p.O5,p.tP,p.PC,l.YN,l.Kr,l.Wl,l.EJ,l.JJ,l.On,P._D,P.N9,J.a,b,p.Ov],styles:['[_nghost-%COMP%]{display:block}.table[_ngcontent-%COMP%]{margin-bottom:0;vertical-align:middle}.animated[_ngcontent-%COMP%]{animation:forwards ease-out .3s _ngcontent-%COMP%_FadeIn;filter:blur(2px);left:-5px;opacity:0;position:relative}.animated[_ngcontent-%COMP%]:nth-child(1){animation-delay:20ms}.animated[_ngcontent-%COMP%]:nth-child(2){animation-delay:40ms}.animated[_ngcontent-%COMP%]:nth-child(3){animation-delay:60ms}.animated[_ngcontent-%COMP%]:nth-child(4){animation-delay:80ms}.animated[_ngcontent-%COMP%]:nth-child(5){animation-delay:.1s}.animated[_ngcontent-%COMP%]:nth-child(6){animation-delay:.12s}.animated[_ngcontent-%COMP%]:nth-child(7){animation-delay:.14s}.animated[_ngcontent-%COMP%]:nth-child(8){animation-delay:.16s}.animated[_ngcontent-%COMP%]:nth-child(9){animation-delay:.18s}.animated[_ngcontent-%COMP%]:nth-child(10){animation-delay:.2s}.animated[_ngcontent-%COMP%]:nth-child(11){animation-delay:.22s}.animated[_ngcontent-%COMP%]:nth-child(12){animation-delay:.24s}.animated[_ngcontent-%COMP%]:nth-child(13){animation-delay:.26s}.animated[_ngcontent-%COMP%]:nth-child(14){animation-delay:.28s}.animated[_ngcontent-%COMP%]:nth-child(15){animation-delay:.3s}.animated[_ngcontent-%COMP%]:nth-child(16){animation-delay:.32s}.animated[_ngcontent-%COMP%]:nth-child(17){animation-delay:.34s}.animated[_ngcontent-%COMP%]:nth-child(18){animation-delay:.36s}.animated[_ngcontent-%COMP%]:nth-child(19){animation-delay:.38s}.animated[_ngcontent-%COMP%]:nth-child(20){animation-delay:.4s}.animated[_ngcontent-%COMP%]:nth-child(21){animation-delay:.42s}.animated[_ngcontent-%COMP%]:nth-child(22){animation-delay:.44s}.animated[_ngcontent-%COMP%]:nth-child(23){animation-delay:.46s}.animated[_ngcontent-%COMP%]:nth-child(24){animation-delay:.48s}.animated[_ngcontent-%COMP%]:nth-child(25){animation-delay:.5s}.animated[_ngcontent-%COMP%]:nth-child(26){animation-delay:.52s}.animated[_ngcontent-%COMP%]:nth-child(27){animation-delay:.54s}.animated[_ngcontent-%COMP%]:nth-child(28){animation-delay:.56s}.animated[_ngcontent-%COMP%]:nth-child(29){animation-delay:.58s}.animated[_ngcontent-%COMP%]:nth-child(30){animation-delay:.6s}.animated[_ngcontent-%COMP%]:nth-child(31){animation-delay:.62s}.animated[_ngcontent-%COMP%]:nth-child(32){animation-delay:.64s}.animated[_ngcontent-%COMP%]:nth-child(33){animation-delay:.66s}.animated[_ngcontent-%COMP%]:nth-child(34){animation-delay:.68s}.animated[_ngcontent-%COMP%]:nth-child(35){animation-delay:.7s}.animated[_ngcontent-%COMP%]:nth-child(36){animation-delay:.72s}.animated[_ngcontent-%COMP%]:nth-child(37){animation-delay:.74s}.animated[_ngcontent-%COMP%]:nth-child(38){animation-delay:.76s}.animated[_ngcontent-%COMP%]:nth-child(39){animation-delay:.78s}.animated[_ngcontent-%COMP%]:nth-child(40){animation-delay:.8s}.animated[_ngcontent-%COMP%]:nth-child(41){animation-delay:.82s}.animated[_ngcontent-%COMP%]:nth-child(42){animation-delay:.84s}.animated[_ngcontent-%COMP%]:nth-child(43){animation-delay:.86s}.animated[_ngcontent-%COMP%]:nth-child(44){animation-delay:.88s}.animated[_ngcontent-%COMP%]:nth-child(45){animation-delay:.9s}.animated[_ngcontent-%COMP%]:nth-child(46){animation-delay:.92s}.animated[_ngcontent-%COMP%]:nth-child(47){animation-delay:.94s}.animated[_ngcontent-%COMP%]:nth-child(48){animation-delay:.96s}.animated[_ngcontent-%COMP%]:nth-child(49){animation-delay:.98s}.animated[_ngcontent-%COMP%]:nth-child(50){animation-delay:1s}@keyframes _ngcontent-%COMP%_FadeIn{0%{filter:blur(2px);left:-5px;opacity:0}to{filter:blur(0px);left:0;opacity:1}}.row-expand[_ngcontent-%COMP%]{background:#0000!important;border:none;padding:0!important}.collapse-toggle[_ngcontent-%COMP%]:after{content:"\\f283";display:inline-block;font-family:bootstrap-icons!important;font-style:normal;font-weight:400!important;font-variant:normal;text-transform:none;line-height:1;vertical-align:-.125em}.collapse-toggle[aria-expanded=true][_ngcontent-%COMP%]:after{content:"\\f27d"}.collapse-toggle.collapsed[_ngcontent-%COMP%]:after{content:"\\f283"}tfoot[_ngcontent-%COMP%]{background:rgba(var(--app-gray_800),1);color:rgba(var(--app-gray_0),1)}.sticky-head[_ngcontent-%COMP%]{background:rgba(var(--app-gray_0),1);box-shadow:0 2px 16px #0002;position:sticky;top:0;z-index:1}@media (max-width: 650px){thead[_ngcontent-%COMP%]{display:none}  td{display:grid}  td:before{content:attr(data-label);font-weight:700}}']});var I=c(5950);const mt=function(){return[]};function dt(o,n){if(1&o&&t._UZ(0,"app-input",7),2&o){const e=n.$implicit;t.Q6J("name",e[0])("label",e[0])("type",e[1].type)("options",e[1].options||t.DdM(6,mt))("floatingLabel",e[1].floatingLabel||!1)("ngControl",e[1].ngControl)}}function _t(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",1)(1,"div",2),t.YNc(2,dt,1,7,"app-input",3),t.qZA(),t.TgZ(3,"div",4)(4,"button",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onFormSubmit(a.ngForm.value))}),t._UZ(5,"i",6),t._uU(6," Submit "),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.ngForm),t.xp6(1),t.Q6J("ngClass","flexgrid flexgrid--"+e.appForm.columns),t.xp6(1),t.Q6J("ngForOf",e.Object.entries(e.appForm.controls))("ngForTrackBy",e.formHasChanged),t.xp6(2),t.Q6J("disabled",e.ngForm.invalid)}}class _{constructor(){this.Object=Object,this.formSubmitEmitter=new t.vpe}set appForm(n){this._appForm=n,this.loadForm(n)}get appForm(){return this._appForm}loadForm(n){const e=Object.entries(n.controls);for(const[a,r]of e){const m=(r.validators||[]).map(s=>"requiredTrue"===s.type?l.kI.requiredTrue:"pattern"===s.type&&s.pattern?l.kI.pattern(s.pattern):"min"===s.type&&s.min&&!isNaN(s.min)?l.kI.min(s.min):"max"===s.type&&s.max&&!isNaN(s.max)?l.kI.max(s.max):"minLength"===s.type&&s.min&&!isNaN(s.min)?l.kI.minLength(s.min):"maxLength"===s.type&&s.max&&!isNaN(s.max)?l.kI.maxLength(s.max):l.kI.required);Object.setPrototypeOf(n.controls[a],{ngControl:new l.NI(r.default,m)})}const i=e.reduce((a,[r,m])=>(a[r]=m.ngControl,a),{});this.ngForm=new l.cw(i)}onFormSubmit(n){this.formSubmitEmitter.emit(n)}formHasChanged(){return this.ngForm}}function gt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-form",15),t.NdJ("formSubmit",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.addEntry(a))}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("appForm",e.formEntry.form)}}function ht(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"th",18),t.NdJ("sort",function(a){t.CHM(e),t.oxw(2);const r=t.MAs(14);return t.KtG(r.sort(a))}),t._uU(1),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("sortable",e),t.xp6(1),t.hij(" ",e," ")}}function ut(o,n){if(1&o&&(t.YNc(0,ht,2,2,"th",16),t._UZ(1,"th",17)),2&o){const e=t.oxw(2);t.Q6J("ngForOf",e.props)}}function ft(o,n){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=n.$implicit,i=t.oxw().$implicit;t.xp6(1),t.Oqu(i[e])}}function yt(o,n){if(1&o&&(t.YNc(0,ft,2,1,"td",19),t.TgZ(1,"td")(2,"div",20)(3,"button",21),t._UZ(4,"i",22),t.qZA(),t.TgZ(5,"button",23),t._UZ(6,"i",10),t.qZA()()()),2&o){const e=t.oxw(2);t.Q6J("ngForOf",e.props)}}function bt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.goToCreate(a.formEntry.form))}),t._UZ(3,"i",4),t._uU(4," Editor "),t.qZA(),t.TgZ(5,"h6",5),t._uU(6),t.qZA(),t.YNc(7,gt,1,1,"app-form",6),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"button",9),t._UZ(11,"i",10),t._uU(12," Multi-delete "),t.qZA()(),t.TgZ(13,"app-table",11,12),t.NdJ("rowSelected",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.selRow(a))})("rowDeselected",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.deselRow(a))}),t.YNc(15,ut,2,1,"ng-template",null,13,t.W1O),t.YNc(17,yt,7,1,"ng-template",null,14,t.W1O),t.qZA()()()}if(2&o){const e=t.MAs(14),i=t.MAs(16),a=t.MAs(18),r=t.oxw();t.xp6(6),t.Oqu(r.formEntry.form.name),t.xp6(1),t.Q6J("ngIf",r.formEntry),t.xp6(3),t.Q6J("disabled",0===e.selectedRows.length),t.xp6(3),t.Q6J("thead",i)("tbody",a)("items",r.data)("searchable",r.props)("paginated",!0)("pageSize",5)("selectable",!0)}}_.\u0275fac=function(n){return new(n||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-form"]],inputs:{appForm:"appForm"},outputs:{formSubmitEmitter:"formSubmit"},standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["novalidate","",3,"formGroup",4,"ngIf"],["novalidate","",3,"formGroup"],[3,"ngClass"],[3,"name","label","type","options","floatingLabel","ngControl",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-end","mt-3"],[1,"btn","btn-primary",3,"disabled","click"],[1,"bi","bi-send-fill"],[3,"name","label","type","options","floatingLabel","ngControl"]],template:function(n,e){1&n&&t.YNc(0,_t,7,5,"form",0),2&n&&t.Q6J("ngIf",e.ngForm)},dependencies:[p.ez,p.mk,p.sg,p.O5,I.m,l._Y,l.JL,l.sg,J.a],encapsulation:2});class C{constructor(n,e,i,a){this.dynamicFormService=n,this.router=e,this.route=i,this.toaster=a,this.Object=Object,this.data=[],this.props=[]}ngOnInit(){this.route.queryParamMap.pipe((0,O.U)(n=>n.get("name")),(0,F.h)(n=>!!n),(0,T.b)(n=>{try{this.formEntry=this.dynamicFormService.getForm(n),this.initData(this.formEntry.data)}catch{this.toaster.show("Could not load form.",{classname:"bg-danger text-light"})}})).subscribe()}initData(n){this.data=[...n],this.props=Object.keys(n.reduce((e,i)=>(Object.keys(i).forEach(a=>e[a]=1),e),{}))}selRow(n){}deselRow(n){}goToCreate(n){this.router.navigate(["dashboard","dynamic-form","create"],{queryParams:{name:n.name}})}addEntry(n){const{name:e}=this.route.snapshot.queryParams,{data:i}=this.dynamicFormService.getForm(e);i.push((0,A.A)(n)),this.initData(i)}}C.\u0275fac=function(n){return new(n||C)(t.Y36(d),t.Y36(g.F0),t.Y36(g.gz),t.Y36(M.k))},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-use"]],decls:1,vars:1,consts:[["class","d-grid gap-3 p-3","style","margin: min(10vh, 10rem) auto; max-width: 1920px;",4,"ngIf"],[1,"d-grid","gap-3","p-3",2,"margin","min(10vh, 10rem) auto","max-width","1920px"],[1,"card","card-body","shadow"],[1,"btn","btn-outline-primary","position-absolute",2,"top","1rem","right","1rem",3,"click"],[1,"bi","bi-pencil-square"],[1,"display-6"],[3,"appForm","formSubmit",4,"ngIf"],[1,"card","shadow"],[1,"d-flex","gap-2","p-3"],[1,"btn","btn-danger",3,"disabled"],[1,"bi","bi-trash3"],[3,"thead","tbody","items","searchable","paginated","pageSize","selectable","rowSelected","rowDeselected"],["dt",""],["thead",""],["tbody",""],[3,"appForm","formSubmit"],["sortable","",3,"sortable","sort",4,"ngFor","ngForOf"],[2,"width","10rem"],["sortable","",3,"sortable","sort"],[4,"ngFor","ngForOf"],[1,"d-flex","gap-2","justify-content-center"],["type","button",1,"btn","btn-primary"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-danger"]],template:function(n,e){1&n&&t.YNc(0,bt,19,10,"div",0),2&n&&t.Q6J("ngIf",e.formEntry)},dependencies:[p.sg,p.O5,x,u,_]});const xt=[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:h},{path:"use",component:C}];class f{}f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[g.Bz.forChild(xt),g.Bz]});class y{}y.\u0275fac=function(n){return new(n||y)},y.\u0275mod=t.oAB({type:y}),y.\u0275inj=t.cJS({imports:[p.ez,f,I.m,_]}),t.B6R(h,[p.sg,p.O5,_],[])}}]);